var t=Object.defineProperty,e=(e,s,a)=>((e,s,a)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a)(e,"symbol"!=typeof s?s+"":s,a);import{a as s,j as a,d as i,q as n,x as r,A as o,C as l,z as h,B as c,r as E,w as u,D as d,E as f,G as m,F as p,y as T,u as M,T as _,H as R,O as g,P as A,n as P,v as F}from"./@vue-Q0RUZqGJ.js";import{u as N}from"../js2/index-4FF_1EHz.js";import{p as D}from"./pako-__J333JV.js";import{C as I}from"./crypto-js-D2oSFZKS.js";import"./pinia-CGq0uztM.js";import"./vue-router-BgjY1fVt.js";import"./pinia-plugin-persistedstate-CuiE3Ez8.js";import"./destr-WfmzGWA8.js";import"./deep-pick-omit-DP_A4OSP.js";const S=(t,e=0)=>Math.max(t,e),C=t=>{if(t<1e3)return`${t}`;const e=[{value:1e11,symbol:"千亿"},{value:1e8,symbol:"亿"},{value:1e7,symbol:"千万"},{value:1e4,symbol:"万"},{value:1e3,symbol:"千"}];for(const{value:s,symbol:a}of e)if(t>=s){const e=Math.floor(t/s),i=`${e}${a}`;if(i.length<=4)return i;if(e<10){const e=`${Math.floor(t/s*10)/10}${a}`;if(e.length<=4)return e}}return`${t}`},L=["#2ad41a","#04aef8","#f780c6"],v=["#410a0a","#3f3f3d","#abbbb9"];function y(t,e){return`<span class="log-${e}">&nbsp;${t}&nbsp;</span>`}var b=(t=>(t.de_dizziness="眩晕",t.de_poisoned="中毒",t.strengthen="强化",t))(b||{});function O(t){return`<span class="log-${t.startsWith("de_")?"de_":""}buff">${b[t]}</span>`}const U=class t{static limitLog(e){t.LOG_LIST.push(e),t.LOG_LIST.length>100&&t.LOG_LIST.splice(0,Math.round(50))}static attack(e){const s=`${y(e.actor.NAME,e.actor.SLIDE)} 使用了${y("普通攻击","system")}，${y(e.target.NAME,e.target.SLIDE)} 受到了 ${y(`${e.demage}`,"system")}点伤害。`;t.limitLog(s)}static skillAttack(e){const s=`${y(e.actor.NAME,e.actor.SLIDE)} 使用了技能 ${y(e.skillName,"system")}，对 ${y(e.target.NAME,e.target.SLIDE)} 造成了 ${y(`${e.demage}`,"system")}点伤害。`;t.limitLog(s)}static heal(e){const s=`${y(e.actor.NAME,e.actor.SLIDE)} 使用了 ${y(e.skillName,"system")}，${y(e.target.NAME,e.target.SLIDE)} 恢复了 ${y(`${e.demage}`,"system")}点生命。`;t.limitLog(s)}static defeated(e){const s=`${y(e.target.NAME,e.target.SLIDE)} 被击败了，${y(e.actor.NAME,e.actor.SLIDE)}赢得了${y("胜利","primary")}!`;t.limitLog(s)}static attackMiss(e){const s=`${y(e.actor.NAME,e.actor.SLIDE)} 发起了攻击，但被${y(e.target.NAME,e.target.SLIDE)}成功${y("闪避","system")}!`;t.limitLog(s)}static buffApplied(e){const s=`${y(e.actor.NAME,e.actor.SLIDE)} 向 ${y(e.target.NAME,e.target.SLIDE)} 施加了 ${O(e.effect)} 效果。`;t.limitLog(s)}static buffAppliedFail(e){const s=`${y(e.actor.NAME,e.actor.SLIDE)} 准备向 ${y(e.target.NAME,e.target.SLIDE)} 施加 ${O(e.effect)} 效果，${y("却并没有成功","system")}。`;t.limitLog(s)}static buffUpdate(e){const s=`${y(e.target.NAME,e.target.SLIDE)} 产生了${y("新","primary")}的 ${O(e.effect)} 效果。`;t.limitLog(s)}static buffStrenthen(e){const s=`${y(e.target.NAME,e.target.SLIDE)} 的 ${O(e.effect)} 效果得到${y("叠加","danger")}。`;t.limitLog(s)}static buffExpired(e){const s=`${y(e.target.NAME,e.target.SLIDE)} 的 ${O(e.effect)} 效果已结束。`;t.limitLog(s)}static system(e){const s=`<span class="log-system">${e}</span>`;t.limitLog(s)}};e(U,"LOG_LIST",s([]));let H=U;class ${constructor(){e(this,"HP",100),e(this,"MP",50),e(this,"ATK",20),e(this,"M_ATK",15),e(this,"DEF",10),e(this,"M_DEF",8),e(this,"PEN","0%"),e(this,"M_PEN","0%"),e(this,"SPD",15),e(this,"CRIT_RATE","5%"),e(this,"CRIT_DMG","150%"),e(this,"DODGE","3%"),e(this,"HIT","90%"),e(this,"RESIST",{de_dizziness:"5%",de_poisoned:"5%"})}}var k=(t=>(t[t.NORMAL_ATTACK=0]="NORMAL_ATTACK",t[t.PHYSICAL_ATTACK=1]="PHYSICAL_ATTACK",t[t.MAGIC_ATTACK=2]="MAGIC_ATTACK",t))(k||{}),x=(t=>(t.DIZZINESS="de_dizziness",t.POISONED="de_poisoned",t.STRENGTHEN="strengthen",t))(x||{}),w=(t=>(t.FRIENDLY="friendly",t.ENEMY="enemy",t))(w||{});class K extends ${constructor(t,s,a=1,i="secret",n=0){super(),e(this,"NAME",""),e(this,"AGE",1),e(this,"SEX","secret"),e(this,"IMAGE",""),e(this,"SLIDE"),e(this,"EXP",0),e(this,"CURRENT_HP",this.HP),e(this,"CURRENT_MP",this.MP),e(this,"LEVEL",0),e(this,"EFFECT_MAP",new Map),e(this,"ADDITION_PERPORTY",new Map),e(this,"BUFF_EFFECT",{HP:0,MP:0,ATK:0,M_ATK:0,DEF:0,M_DEF:0,PEN:"0%",M_PEN:"0%",SPD:0,CRIT_RATE:"0%",CRIT_DMG:"0%",DODGE:"0%",HIT:"0%",RESIST:{de_dizziness:"0%",de_poisoned:"0%"}}),e(this,"EXTRA_EFFECT",{HP:0,MP:0,ATK:0,M_ATK:0,DEF:0,M_DEF:0,PEN:"0%",M_PEN:"0%",SPD:0,CRIT_RATE:"0%",CRIT_DMG:"0%",DODGE:"0%",HIT:"0%",RESIST:{de_dizziness:"0%",de_poisoned:"0%"}}),e(this,"ROUND_COUNT",0),this.NAME=t,this.AGE=a,this.SLIDE=s,this.SEX=i,this.EXP=n,this.initData()}initData(){this.LEVEL=this.getLevel(),this.HP=Math.floor(this.HP+50*this.LEVEL),this.CURRENT_HP=this.HP,this.MP=Math.floor(this.MP+10*this.LEVEL),this.CURRENT_MP=this.MP,this.ATK=Math.floor(this.ATK+3*this.LEVEL),this.M_ATK=Math.floor(this.M_ATK+2*this.LEVEL),this.DEF=Math.floor(this.DEF+3*this.LEVEL),this.M_DEF=Math.floor(this.M_DEF+2*this.LEVEL),this.SPD=Math.floor(this.SPD+2*this.LEVEL),this.CRIT_RATE=Math.floor(Math.max(this.ATK,this.M_ATK)/100)+parseFloat(this.CRIT_RATE)+"%",this.CRIT_DMG=Math.floor(Math.max(this.ATK,this.M_ATK)/100*2.5)+parseFloat(this.CRIT_DMG)+"%"}getStringUnit(t){return S(Math.round(parseFloat(this[t])+parseFloat(this.BUFF_EFFECT[t]||"0%")+parseFloat(this.EXTRA_EFFECT[t]||"0%")))+"%"}getNumberUnit(t){return S(Math.round(this[t]+(this.BUFF_EFFECT[t]||0)+(this.EXTRA_EFFECT[t]||0)))}getResist(t){var e,s;return S(Math.round(parseFloat(this.RESIST[t])+parseFloat((null==(e=this.BUFF_EFFECT.RESIST)?void 0:e[t])||"0%")+parseFloat((null==(s=this.EXTRA_EFFECT.RESIST)?void 0:s[t])||"0%")))+"%"}getRoundCount(){return this.ROUND_COUNT}canAct(){return!!this.CURRENT_HP}updateIncomeInfo(t){this.EXP+=t.EXP,this.getLevel()!==this.LEVEL&&this.initData(),this.reset()}reset(){this.CURRENT_HP=this.getNumberUnit("HP"),this.CURRENT_MP=this.getNumberUnit("MP"),this.EFFECT_MAP.clear(),this.BUFF_EFFECT={HP:0,MP:0,ATK:0,M_ATK:0,DEF:0,M_DEF:0,PEN:"0%",M_PEN:"0%",SPD:0,CRIT_RATE:"0%",CRIT_DMG:"0%",DODGE:"0%",HIT:"0%",RESIST:{de_dizziness:"0%",de_poisoned:"0%"}},this.ROUND_COUNT=0}updateStatus(){this.ROUND_COUNT++,this.EFFECT_MAP.size&&this.EFFECT_MAP.forEach((t=>{this.deleteBuffEffect(t.state)}))}useAdditionEffect(t,e){this.ADDITION_PERPORTY.has(t)&&this.deleteAdditionEffect(t),this.ADDITION_PERPORTY.set(t,e),this.deployStatus(e,this.EXTRA_EFFECT)}deleteAdditionEffect(t){let e=this.ADDITION_PERPORTY.get(t)||null;this.ADDITION_PERPORTY.has(t)&&this.ADDITION_PERPORTY.delete(t),e&&this.removeStatus(e,this.EXTRA_EFFECT)}clearAllAdditionEffect(){this.ADDITION_PERPORTY.forEach(((t,e)=>{this.deleteAdditionEffect(e)}))}getLevel(){return Math.floor(Math.pow(this.EXP/100,2/3))}isCritcal(){const t=this.getStringUnit("CRIT_RATE");return Math.random()<=parseFloat(t)/100}deleteBuffEffect(t,e=!1){if(this.EFFECT_MAP.has(t)){const s=this.EFFECT_MAP.get(t);let a=this.ROUND_COUNT-s.startCount>=s.roundCount;(e||a)&&(this.removeStatus(s.status,this.BUFF_EFFECT),this.EFFECT_MAP.delete(t))}}useBuffEffect(t){const e=this.EFFECT_MAP.get(t.state)||null,s=!e;return e&&!t.isOverlay?(this.deleteBuffEffect(e.state,!0),H.buffUpdate({target:this,effect:t.state})):e&&t.isOverlay&&(this.deployStatus(e.status,t.status),this.removeStatus(e.status,this.BUFF_EFFECT),H.buffStrenthen({target:this,effect:t.state})),this.EFFECT_MAP.set(t.state,t),this.deployStatus(t.status,this.BUFF_EFFECT),s}deployStatus(t,e){Object.entries(t).forEach((([t,s])=>{const a=t;if(t in e)if("number"==typeof s)e[a]=Math.floor(e[a]+s);else if("string"==typeof s){const t=parseFloat(e[a]);e[a]=Math.floor(t+parseFloat(s))+"%"}else{let t=e[a],i=s;t[x.DIZZINESS]=Math.floor(parseFloat(t[x.DIZZINESS])+parseFloat(i[x.DIZZINESS]))+"%",t[x.POISONED]=Math.floor(parseFloat(t[x.POISONED])+parseFloat(i[x.POISONED]))+"%"}}))}removeStatus(t,e){Object.entries(t).forEach((([t,s])=>{const a=t;if(t in e)if("number"==typeof s)e[a]=Math.floor(e[a]-s);else if("string"==typeof s){const t=parseFloat(e[a]);e[a]=Math.floor(t-parseFloat(s))+"%"}else{let t=e[a],i=s;t[x.DIZZINESS]=Math.floor(parseFloat(t[x.DIZZINESS])-parseFloat(i[x.DIZZINESS]))+"%",t[x.POISONED]=Math.floor(parseFloat(t[x.POISONED])-parseFloat(i[x.POISONED]))+"%"}}))}getPhysicalDemage(t,e=1){const s=this.getNumberUnit("ATK"),a=s+t*(1-parseFloat(this.PEN)/100);return a?S(Math.round(e*(s*(s/a))*(this.isCritcal()?parseFloat(this.CRIT_DMG)/100:1))):0}getMagicDemage(t,e=1){const s=this.getNumberUnit("M_ATK"),a=this.getStringUnit("M_PEN"),i=this.getStringUnit("CRIT_DMG");return s+t*(1-parseFloat(a)/100)?S(Math.round(e*(s*(s/(s+t*(1-parseFloat(a)/100))))*(this.isCritcal()?parseFloat(i)/100:1))):0}getFinalDenfence(t=k.NORMAL_ATTACK){let e=0;return e=t===k.MAGIC_ATTACK?this.getNumberUnit("M_DEF"):this.getNumberUnit("DEF"),S(e)}isHitEnemy(t){const e=parseFloat(this.getStringUnit("HIT"))-parseFloat(t);return Math.random()<e/100}isHitEffect(t,e="0%"){const s=parseFloat(this.getStringUnit("HIT"))+parseFloat(e),a=s-parseFloat(t);return Math.random()<a/s}}var G=(t=>(t.SECRET="secret",t.MALE="male",t.FEMALE="female",t))(G||{});const B=t=>Math.round(100*t^1.5);class j{constructor(t,s=1e3){e(this,"animationId",null),e(this,"lastTime",0),e(this,"interval"),e(this,"callback"),e(this,"isRunning",!1),e(this,"loop",(t=>{var e;this.isRunning&&(t-this.lastTime>=this.interval&&(null==(e=this.callback)||e.call(this),this.lastTime=t),this.animationId=requestAnimationFrame(this.loop))})),this.callback=t,this.interval=s}start(){this.isRunning||(this.isRunning=!0,this.lastTime=performance.now(),this.animationId=requestAnimationFrame(this.loop))}pause(){this.isRunning&&(this.isRunning=!1,null!==this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null))}resume(){this.isRunning||(this.isRunning=!0,this.animationId=requestAnimationFrame(this.loop))}end(){this.pause(),this.callback=null}}const Y={class:"person_view"},X={class:"main_mp flex_start"},z=a({__name:"Person",props:{identity:{},name:{},currentHP:{},maxHP:{},currentMP:{},maxMP:{},isLTR:{type:Boolean}},setup(t){const e=t,s=i((()=>`${C(e.currentHP)} / ${C(e.maxHP)}`)),a=i((()=>`${C(e.currentMP)} / ${C(e.maxMP)}`)),E=i((()=>e.name.length>3?e.name.slice(0,2)+"...":e.name)),u=i((()=>e.identity===w.FRIENDLY?L[Math.round((L.length-1)*Math.random())]:v[Math.round((v.length-1)*Math.random())])),d=i((()=>e.maxHP?e.currentHP/e.maxHP*100:0)),f=i((()=>e.maxMP?e.currentMP/e.maxMP*100:0));return(t,e)=>(r(),n("div",Y,[o("div",{class:h(["icon_area",{pos_left:t.isLTR,pos_right:!t.isLTR}]),style:l({backgroundColor:u.value})},c(E.value),7),o("div",{class:h(["p_area",{pos_left:!t.isLTR,pos_right:t.isLTR}])},[o("div",{class:h(["main_hp flex_start",{flex_end:!t.isLTR,flex_start:t.isLTR}])},[o("div",{class:"current_hp",style:l({width:d.value+"%"})},null,4),o("div",{class:h(["hp_text",{pos_right:!t.isLTR,pos_left:t.isLTR,pr20:!t.isLTR,pl20:t.isLTR}])},c(s.value),3)],2),o("div",X,[o("div",{class:"current_mp",style:l({width:f.value+"%"})},null,4),o("div",{class:h(["mp_text",{pos_right:!t.isLTR,pos_left:t.isLTR,pr20:!t.isLTR,pl20:t.isLTR}])},c(a.value),3)])],2)]))}}),Z={ageBase:15,agePerLevel:3.5,ageRandomRange:.2,nameComponents:{prefixes:["幽冥","赤焰","噬魂","九幽","玄冰","血煞","混沌","天罡"],cores:["魔蛛","妖虎","鬼藤","骨龙","尸鹫","影狼","血鸦","毒蟾"],suffixes:["幼体","变异体","首领","残魂","化身"]},baseAttributes:{hp:100,attack:20,defense:10},growthRate:{hp:8.5,attack:3.2,defense:1.8},skillRules:{elementMap:{fire:["赤焰","炎","焚天"],ice:["玄冰","寒","霜冻"],poison:["噬魂","毒","腐化"]},typeSkills:{beast:["狂暴撕咬","兽王威压"],undead:["死灵复苏","腐毒侵蚀"],demon:["心魔蛊惑","九幽鬼火"],unknown:[]}},tierThresholds:{advanced:50}},V=t=>{const e=t=>t[Math.floor(Math.random()*t.length)],s=t=>{var e;return(null==(e=Object.entries({beast:["虎","狼","蛛"],undead:["尸","骨","鬼"],demon:["魔","煞","幽冥"],unknown:[]}).find((([e,s])=>s.some((e=>t.includes(e))))))?void 0:e[0])||"unknown"},a=(()=>{const{prefixes:s,cores:a,suffixes:i}=Z.nameComponents,n=t>60?e(i.slice(2)):t>30?i[1]:i[0],r=e(s);return`${r}${2===r.length&&Math.random()>.4?"·":""}${e(a)}${n}`})();return{name:a,level:t,age:(()=>{const e=Z.ageBase+t*Z.agePerLevel,s=1+(2*Math.random()-1)*Z.ageRandomRange;return Math.floor(e*s)})(),gender:Math.random()>.6?G.MALE:G.FEMALE,type:s(a),attributes:(e=>{const s={...Z.baseAttributes};return Object.keys(Z.growthRate).forEach((e=>{s[e]+=Math.floor(t*Z.growthRate[e])})),Object.entries(Z.skillRules.elementMap).forEach((([t,a])=>{if(a.some((t=>e.includes(t))))switch(t){case"fire":s.attack*=1.2;break;case"ice":s.defense*=1.3;break;case"poison":s.hp*=1.15}})),s})(a),skills:(e=>{const a=[];Object.entries(Z.skillRules.elementMap).forEach((([t,s])=>{s.some((t=>e.includes(t)))&&a.push(`${t.toUpperCase()}系精通`)}));const i=s(e);return a.push(...Z.skillRules.typeSkills[i]),t>=Z.tierThresholds.advanced&&a.push("元神出窍"),[...new Set(a)]})(a),description:`散发着${a.includes("幽冥")?"阴森鬼气":"狂暴灵气"}的修真界生物`}},q=class t{static generateEnemies(e,s){const a=t.countMap[s],i=t.scale[s],n=[];for(let t=0;t<a;t++){const s=V(e),a=new K(s.name,w.ENEMY,s.age,s.gender,B(s.level));a.ATK=Math.round(a.ATK*i),a.M_ATK=Math.round(a.M_ATK*i),a.HP=Math.round(a.HP*i),a.CURRENT_HP=Math.round(a.CURRENT_HP*i),a.MP=Math.round(a.MP*i),a.CURRENT_MP=Math.round(a.CURRENT_MP*i),a.DEF=Math.round(a.DEF*i),a.M_DEF=Math.round(a.M_DEF*i),a.SPD=Math.round((a.SPD-t)*i),a.CRIT_RATE=Math.round(parseFloat(a.CRIT_RATE)*i)+"%",a.CRIT_RATE=Math.round(parseFloat(a.CRIT_RATE)*i)+"%",n.push(a)}return n}};e(q,"countMap",{easy:2,normal:3,hard:4,boss:1}),e(q,"scale",{easy:.8,normal:1,hard:1.2,boss:2});let W=q;const J={class:"log_view"},Q=["innerHTML"],tt=a({__name:"LogView",setup(t){const e=E(null),s=E(!0);let a=!1;const i=H.LOG_LIST;u(i,(()=>{s.value&&P((()=>{l()}))}));const l=()=>{e.value&&(e.value.scrollTop=e.value.scrollHeight)},h=()=>{a||(a=!0,requestAnimationFrame((()=>{s.value=((t=5)=>{if(!e.value)return!0;const{scrollTop:s,clientHeight:a,scrollHeight:i}=e.value;return i-(s+a)<t})(),a=!1})))};d((()=>{var t;null==(t=e.value)||t.addEventListener("scroll",h)})),f((()=>{var t;null==(t=e.value)||t.removeEventListener("scroll",h)}));const c=()=>{const t=setTimeout((()=>{s.value=!0,l(),clearTimeout(t)}),350)};return(t,a)=>(r(),n("div",J,[o("div",{ref_key:"scrollContainer",ref:e,class:"scroll-container"},[(r(!0),n(p,null,T(M(i),((t,e)=>(r(),n("div",{key:e,class:"message-item",innerHTML:t},null,8,Q)))),128))],512),m(_,{name:"fade-slide"},{default:R((()=>[g(o("div",{class:"back-button",onClick:c}," ↓ 返回底部 ",512),[[A,!s.value]])])),_:1})]))}}),et="People who don't want to be slaves";function st(t,e=et){const s=I.SHA256(e),a=I.enc.Base64.parse(t),i=I.lib.WordArray.create(a.words.slice(0,4),16),n=I.lib.WordArray.create(a.words.slice(4),a.sigBytes-16),r={iv:i,mode:I.mode.CBC,padding:I.pad.Pkcs7},o=function(t){const e=t.words,s=t.sigBytes,a=new Uint8Array(s);for(let i=0;i<s;i++)a[i]=e[i>>>2]>>>24-i%4*8&255;return a}(I.AES.decrypt({ciphertext:n},s,r));return D.inflate(o,{to:"string"})}const at={class:"game_container"},it={class:"attack_list"},nt={class:"attack_list"},rt={key:0,class:"box",style:{display:"flex","justify-content":"space-evenly"}},ot=a({__name:"Combat",setup(t){const e=N();let a=s([]),i=s([]),l=[];const E=s({}),u=()=>{let t=W.generateEnemies(P.getLevel(),"easy");i=t,a.forEach((t=>{t.reset()})),l=[...a,...t],R=l.sort(((t,e)=>e.SPD-t.SPD))},_=()=>{const t=a.every((t=>!t.CURRENT_HP)),e=i.every((t=>!t.CURRENT_HP));if(t)return a.forEach((t=>{t.updateIncomeInfo({EXP:-10})})),H.defeated({actor:i[0],target:a[0]}),void u();if(e)return a.forEach((t=>{const e={EXP:Math.round(100*Math.random())};t.updateIncomeInfo(e)})),H.defeated({target:i[0],actor:a[0]}),void u();const s=g();if(s&&s.canAct()){E[s.NAME]=s.SLIDE===w.FRIENDLY?"attack":"counterattack";const t=(s.SLIDE===w.ENEMY?a:i).filter((t=>t.CURRENT_HP)).sort(((t,e)=>t.CURRENT_HP-e.CURRENT_HP))[0];if(!s.isHitEnemy(t.getStringUnit("DODGE")))return E[t.NAME]="miss",void H.attackMiss({actor:s,target:t});if(Math.random()>.4)if(s.isHitEffect(t.getResist(x.POISONED))){const e={startCount:t.getRoundCount(),roundCount:2,state:x.POISONED,isOverlay:Math.random()>=.6,status:{DEF:-1,ATK:-1}};t.useBuffEffect(e)&&H.buffApplied({actor:s,target:t,effect:x.POISONED})}else H.buffAppliedFail({actor:s,target:t,effect:x.POISONED});else{const t={startCount:s.getRoundCount(),roundCount:2,state:x.STRENGTHEN,isOverlay:!0,status:{DEF:10,ATK:10}};let e=s.SLIDE===w.ENEMY?i:a;const n=e[Math.round(Math.random()*(e.length-1))];n.useBuffEffect(t)&&H.buffApplied({actor:s,target:n,effect:x.STRENGTHEN})}if(t){E[t.NAME]=s.SLIDE===w.FRIENDLY?"hit":"hit-counter";const e=s.getPhysicalDemage((null==t?void 0:t.getFinalDenfence())||0);t.CURRENT_HP=S(Math.round(t.CURRENT_HP-e)),H.attack({actor:s,target:t,demage:e})}let e=setTimeout((()=>{delete E[s.NAME],t&&delete E[t.NAME],clearTimeout(e)}),t?500:400);s.updateStatus()}};let R;const g=()=>{if(R.length){let t=!0;for(;t;){let e=R.shift();if(e&&(R.push(e),e.CURRENT_HP))return t=!1,e}}else;};let A=null,P=new K("陈平安",w.FRIENDLY);d((()=>{let t=new K("宠物甲",w.FRIENDLY),e=new K("柳如烟",w.FRIENDLY);P.SPD+=5,t.SPD+=1,e.SPD+=3,a.push(P),a.push(t),a.push(e);let s=W.generateEnemies(S(Math.round(P.getLevel()-2)),"easy");i=s,l=[...a,...s],R=l.sort(((t,e)=>e.SPD-t.SPD)),A=new j(_,550),A.start()})),f((()=>{null==A||A.end()}));const C=()=>{null==A||A.pause(),v()};let L="";const v=async()=>{L=await function(t,e=et){const s=D.deflate(t),a=I.lib.WordArray.create(s.buffer,s.byteOffset),i=I.SHA256(e),n=I.lib.WordArray.random(16),r={iv:n,mode:I.mode.CBC,padding:I.pad.Pkcs7},o=I.AES.encrypt(a,i,r);return n.concat(o.ciphertext).toString(I.enc.Base64)}(JSON.stringify(P))},y=()=>{null==A||A.resume(),(async()=>{await st(L)})()};return(t,s)=>{var l,u;return r(),n(p,null,[o("span",null,c("已获得经验："+(null==(l=M(a)[0])?void 0:l.EXP)),1),o("span",null,c(" 当前等级："+(null==(u=M(a)[0])?void 0:u.LEVEL)),1),o("div",{class:h(["combat_view",{flex_row:M(e).mediaHelperType.gridColumns>4}])},[o("div",at,[o("div",it,[(r(!0),n(p,null,T(M(a),(t=>(r(),n("div",{class:"attack_item",key:t.NAME},[m(z,{class:h(["unit-wrapper",E[t.NAME]]),name:t.NAME,identity:t.SLIDE,"current-h-p":t.CURRENT_HP,"max-h-p":t.getNumberUnit("HP"),"current-m-p":t.CURRENT_MP,"max-m-p":t.getNumberUnit("MP")},null,8,["class","name","identity","current-h-p","max-h-p","current-m-p","max-m-p"])])))),128))]),o("div",nt,[(r(!0),n(p,null,T(M(i),(t=>(r(),n("div",{class:"attack_item",key:t.NAME},[m(z,{class:h(["unit-wrapper",E[t.NAME]]),name:t.NAME,identity:t.SLIDE,"current-h-p":t.CURRENT_HP,"max-h-p":t.getNumberUnit("HP"),"current-m-p":t.CURRENT_MP,"max-m-p":t.getNumberUnit("MP"),"is-l-t-r":!0},null,8,["class","name","identity","current-h-p","max-h-p","current-m-p","max-m-p"])])))),128))])]),4===M(e).mediaHelperType.gridColumns?(r(),n("div",rt,[o("div",{class:"cancel btn",onClick:C},"暂停战斗"),o("div",{class:"start btn",onClick:y},"恢复战斗")])):F("",!0),m(tt)],2)],64)}}}),lt={class:"main_page"},ht=a({__name:"CultivationView",setup:t=>(t,e)=>(r(),n("div",lt,[m(ot)]))});export{ht as default};
