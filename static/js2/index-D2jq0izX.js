const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/js1/BackPackView-Bn9x87Xa.js","static/js1/@vue-CeZAqxcJ.js","static/js1/pinia-Btsh0Kkk.js","static/js1/vue-router-BhO-QLR9.js","static/js1/pako-__J333JV.js","static/js1/crypto-js-D2oSFZKS.js","static/js1/pinia-plugin-persistedstate-CuiE3Ez8.js","static/js1/destr-WfmzGWA8.js","static/js1/deep-pick-omit-DP_A4OSP.js","static/js1/CultivationView-DvxFBDnX.js","static/css/CultivationView-7GEP2eJh.css","static/js1/SectView-Zfki2ZuY.js","static/css/SectView-GId7cyPF.css","static/js1/StatusView-CLPxYkpL.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,a,s)=>((t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s)(t,"symbol"!=typeof a?a+"":a,s);import{j as a,r as s,d as i,q as n,v as r,x as o,F as l,y as c,z as d,A as u,B as p,a as m,C as E,D as h,E as g,G as f,H as v,I as _,J as y,K as T,L as I,T as S,M as A,N as M,O as D,P as b,w as P,Q as C,u as O,R as F,S as L,U as N,V as R,W as w,X as k}from"../js1/@vue-CeZAqxcJ.js";import{d as x,c as $}from"../js1/pinia-Btsh0Kkk.js";import{u as U,a as H,c as B,b as j}from"../js1/vue-router-BhO-QLR9.js";import{p as G}from"../js1/pako-__J333JV.js";import{C as z}from"../js1/crypto-js-D2oSFZKS.js";import{s as K}from"../js1/pinia-plugin-persistedstate-CuiE3Ez8.js";import"../js1/destr-WfmzGWA8.js";import"../js1/deep-pick-omit-DP_A4OSP.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const V=600,Z=1024,W=class e{static getInitialOrientation(){return"undefined"==typeof window?"portrait":screen.orientation?screen.orientation.type.startsWith("portrait")?"portrait":"landscape":window.matchMedia("(orientation: portrait)").matches?"portrait":"landscape"}static handleOrientationChange(){screen.orientation?e.orientationType=screen.orientation.type.startsWith("portrait")?"portrait":"landscape":e.orientationType=window.matchMedia("(orientation: portrait)").matches?"portrait":"landscape"}static updateScreenState(){e.updatePending||(e.updatePending=!0,setTimeout((()=>{e.updatePending=!1,e.updateGrid(),e.handleOrientationChange(),e.mediaHelperCallback&&e.mediaHelperCallback(e.getMediaHelperType())}),300))}static init(t){e.mediaHelperCallback=t,e.updateGrid(),window.addEventListener("resize",e.updateScreenState),screen.orientation?screen.orientation.addEventListener("change",e.updateScreenState):window.addEventListener("orientationchange",e.updateScreenState)}static destroy(){window.removeEventListener("resize",e.updateScreenState),e.gridColumns=4,e.mediaHelperCallback=null,screen.orientation?screen.orientation.removeEventListener("change",e.updateScreenState):window.removeEventListener("orientationchange",e.updateScreenState)}static getMediaHelperType(){return{orientationType:e.orientationType,gridColumns:e.gridColumns}}};t(W,"orientationType",W.getInitialOrientation()),t(W,"gridColumns",4),t(W,"mediaHelperCallback",null),t(W,"updatePending",!1),t(W,"mediaQueries",{medium:window.matchMedia(`(min-width: ${V}px)`),large:window.matchMedia(`(min-width: ${Z}px)`)}),t(W,"updateGrid",(()=>{W.gridColumns=W.mediaQueries.large.matches?12:W.mediaQueries.medium.matches?8:4}));let X=W;const Y=x("basic",{state:()=>({mediaHelperType:X.getMediaHelperType(),currentPlayerId:"",saveDataMap:{},isBackToLogin:!1}),actions:{setBackToLogin(e){this.isBackToLogin=e},updateMediaHelperType(e){this.mediaHelperType=e},setCurrentPlayerId(e){this.currentPlayerId=e},getCurrentPlayer(){return this.saveDataMap[this.currentPlayerId]||null},deleteSaveData(e){delete this.saveDataMap[e],this.currentPlayerId===e&&(this.currentPlayerId="")},addSaveData(e,t){this.saveDataMap[e]=t},clearAllSaveData(){this.saveDataMap={},this.currentPlayerId=""}},persist:{key:"common",storage:localStorage}});var q=(e=>(e.SIZE_AVOID_TOP="--size-avoid-top",e.SIZE_AVOID_BOTTOM="--size-avoid-bottom",e.SIZE_AVOID_LEFT="--size-avoid-left",e.SIZE_AVOID_RIGHT="--size-avoid-right",e.COLOR_TEXT="--color-text",e.COLOR_BACKGROUND="--color-background",e))(q||{});class J{static setWindowFontSize(e){document.documentElement.style.fontSize=`${e}px`}static setWindowAvoidArea(e,t,a,s){const i=parseFloat(getComputedStyle(document.documentElement).fontSize);document.documentElement.style.setProperty(q.SIZE_AVOID_TOP,`${(t/i).toFixed(2)}rem`),document.documentElement.style.setProperty(q.SIZE_AVOID_BOTTOM,`${(s/i).toFixed(2)}rem`),document.documentElement.style.setProperty(q.SIZE_AVOID_LEFT,`${(e/i).toFixed(2)}rem`),document.documentElement.style.setProperty(q.SIZE_AVOID_RIGHT,`${(a/i).toFixed(2)}rem`)}static setWindowTheme(e,t){document.documentElement.style.setProperty(q.COLOR_TEXT,t),document.documentElement.style.setProperty(q.COLOR_BACKGROUND,e)}}const Q={key:0,class:"tab-bar"},ee=["onClick"],te=a({__name:"TabBar",setup(e){const t=U(),a=H(),m=s([{name:"status",title:"状态",path:"/status"},{name:"backpack",title:"背包",path:"/backpack"},{name:"cultivation",title:"修仙",path:"/cultivation"},{name:"sect",title:"宗门",path:"/sect"}]),E=i((()=>!t.meta.hideTab)),h=e=>t.meta.tab===e.name;return(e,t)=>E.value?(o(),n("nav",Q,[(o(!0),n(l,null,c(m.value,(e=>(o(),n("div",{key:e.name,class:d(["tab-item",{active:h(e)}]),onClick:t=>(e=>{if(h(e))return;const t=e.path.includes(":")?e.path.split("/:")[0]:e.path;a.push(t)})(e)},[u("span",null,p(e.title),1)],10,ee)))),128))])):r("",!0)}}),ae={},se=function(e,t,a){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),a=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));s=Promise.allSettled(t.map((e=>{if((e=function(e){return"/"+e}(e))in ae)return;ae[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,a&&i.setAttribute("nonce",a),document.head.appendChild(i),t?new Promise(((t,a)=>{i.addEventListener("load",t),i.addEventListener("error",(()=>a(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then((t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)}))},ie={path:"/backpack",component:()=>se((()=>import("../js1/BackPackView-Bn9x87Xa.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8])),meta:{tab:"backpack",title:"背包"}},ne=Object.freeze(Object.defineProperty({__proto__:null,default:ie},Symbol.toStringTag,{value:"Module"})),re={path:"/cultivation",component:()=>se((()=>import("../js1/CultivationView-DvxFBDnX.js")),__vite__mapDeps([9,1,2,3,4,5,6,7,8,10])),meta:{tab:"cultivation",title:"修仙",keepAlive:!0}},oe=Object.freeze(Object.defineProperty({__proto__:null,default:re},Symbol.toStringTag,{value:"Module"})),le={path:"/sect",component:()=>se((()=>import("../js1/SectView-Zfki2ZuY.js")),__vite__mapDeps([11,1,2,3,4,5,6,7,8,12])),meta:{tab:"sect",title:"宗门"}},ce=Object.freeze(Object.defineProperty({__proto__:null,default:le},Symbol.toStringTag,{value:"Module"})),de={path:"/status",component:()=>se((()=>import("../js1/StatusView-CLPxYkpL.js")),__vite__mapDeps([13,1,2,3,4,5,6,7,8])),meta:{tab:"status",title:"状态"}},ue=Object.freeze(Object.defineProperty({__proto__:null,default:de},Symbol.toStringTag,{value:"Module"})),pe=Object.assign({"./routes/backpack.ts":ne,"./routes/cultivation.ts":oe,"./routes/sect.ts":ce,"./routes/status.ts":ue}),me=[{path:"/",children:Object.values(pe).map((e=>e.default))}],Ee=(e,t=0)=>Math.max(e,t),he=e=>{if(e<1e3)return`${e}`;const t=[{value:1e11,symbol:"千亿"},{value:1e8,symbol:"亿"},{value:1e7,symbol:"千万"},{value:1e4,symbol:"万"},{value:1e3,symbol:"千"}];for(const{value:a,symbol:s}of t)if(e>=a){const t=Math.floor(e/a),i=`${t}${s}`;if(i.length<=4)return i;if(t<10){const t=`${Math.floor(e/a*10)/10}${s}`;if(t.length<=4)return t}}return`${e}`},ge=["#2ad41a","#04aef8","#f780c6"],fe=["#410a0a","#3f3f3d","#abbbb9"];function ve(e,t){return`<span class="log-${t}">&nbsp;${e}&nbsp;</span>`}var _e=(e=>(e.de_dizziness="眩晕",e.de_poisoned="中毒",e.strengthen="强化",e))(_e||{});function ye(e){return`<span class="log-${e.startsWith("de_")?"de_":""}buff">${_e[e]}</span>`}const Te=class e{static limitLog(t){e.LOG_LIST.push(t),e.LOG_LIST.length>100&&e.LOG_LIST.splice(0,Math.round(50))}static attack(t){const a=`${ve(t.actor.NAME,t.actor.SLIDE)} 使用了${ve("普通攻击","system")}，${ve(t.target.NAME,t.target.SLIDE)} 受到了 ${ve(`${t.demage}`,"system")}点伤害。`;e.limitLog(a)}static skillAttack(t){const a=`${ve(t.actor.NAME,t.actor.SLIDE)} 使用了技能 ${ve(t.skillName,"system")}，对 ${ve(t.target.NAME,t.target.SLIDE)} 造成了 ${ve(`${t.demage}`,"system")}点伤害。`;e.limitLog(a)}static heal(t){const a=`${ve(t.actor.NAME,t.actor.SLIDE)} 使用了 ${ve(t.skillName,"system")}，${ve(t.target.NAME,t.target.SLIDE)} 恢复了 ${ve(`${t.demage}`,"system")}点生命。`;e.limitLog(a)}static defeated(t){const a=`${ve(t.target.NAME,t.target.SLIDE)} 被击败了，${ve(t.actor.NAME,t.actor.SLIDE)}赢得了${ve("胜利","primary")}!`;e.limitLog(a)}static attackMiss(t){const a=`${ve(t.actor.NAME,t.actor.SLIDE)} 发起了攻击，但被${ve(t.target.NAME,t.target.SLIDE)}成功${ve("闪避","system")}!`;e.limitLog(a)}static buffApplied(t){const a=`${ve(t.actor.NAME,t.actor.SLIDE)} 向 ${ve(t.target.NAME,t.target.SLIDE)} 施加了 ${ye(t.effect)} 效果。`;e.limitLog(a)}static buffAppliedFail(t){const a=`${ve(t.actor.NAME,t.actor.SLIDE)} 准备向 ${ve(t.target.NAME,t.target.SLIDE)} 施加 ${ye(t.effect)} 效果，${ve("却并没有成功","system")}。`;e.limitLog(a)}static buffUpdate(t){const a=`${ve(t.target.NAME,t.target.SLIDE)} 产生了${ve("新","primary")}的 ${ye(t.effect)} 效果。`;e.limitLog(a)}static buffStrenthen(t){const a=`${ve(t.target.NAME,t.target.SLIDE)} 的 ${ye(t.effect)} 效果得到${ve("叠加","danger")}。`;e.limitLog(a)}static buffExpired(t){const a=`${ve(t.target.NAME,t.target.SLIDE)} 的 ${ye(t.effect)} 效果已结束。`;e.limitLog(a)}static system(t){const a=`<span class="log-system">${t}</span>`;e.limitLog(a)}};t(Te,"LOG_LIST",m([]));let Ie=Te;class Se{constructor(){t(this,"HP",100),t(this,"MP",50),t(this,"ATK",20),t(this,"M_ATK",15),t(this,"DEF",10),t(this,"M_DEF",8),t(this,"PEN","0%"),t(this,"M_PEN","0%"),t(this,"SPD",15),t(this,"CRIT_RATE","5%"),t(this,"CRIT_DMG","150%"),t(this,"DODGE","3%"),t(this,"HIT","90%"),t(this,"RESIST",{de_dizziness:"5%",de_poisoned:"5%"})}}var Ae=(e=>(e[e.NORMAL_ATTACK=0]="NORMAL_ATTACK",e[e.PHYSICAL_ATTACK=1]="PHYSICAL_ATTACK",e[e.MAGIC_ATTACK=2]="MAGIC_ATTACK",e))(Ae||{}),Me=(e=>(e.DIZZINESS="de_dizziness",e.POISONED="de_poisoned",e.STRENGTHEN="strengthen",e))(Me||{}),De=(e=>(e[e.LOGIN=0]="LOGIN",e[e.REGISTER=1]="REGISTER",e[e.HOME=2]="HOME",e))(De||{}),be=(e=>(e[e.NONE=0]="NONE",e[e.SWORDSMAN=1]="SWORDSMAN",e[e.TALISMAN=2]="TALISMAN",e[e.POISONMASTER=3]="POISONMASTER",e[e.MEDICALFAIRY=4]="MEDICALFAIRY",e[e.BERSERKER=5]="BERSERKER",e))(be||{}),Pe=(e=>(e.FRIENDLY="friendly",e.ENEMY="enemy",e))(Pe||{});class Ce extends Se{constructor(e,a,s=1,i="male",n=0,r){super(),t(this,"NAME",""),t(this,"AGE",1),t(this,"SEX","male"),t(this,"IMAGE",""),t(this,"PROFEESION",be.SWORDSMAN),t(this,"SLIDE"),t(this,"EXP",0),t(this,"CURRENT_HP",this.HP),t(this,"CURRENT_MP",this.MP),t(this,"LEVEL",0),t(this,"EFFECT_MAP",new Map),t(this,"ADDITION_PERPORTY",new Map),t(this,"BUFF_EFFECT",{HP:0,MP:0,ATK:0,M_ATK:0,DEF:0,M_DEF:0,PEN:"0%",M_PEN:"0%",SPD:0,CRIT_RATE:"0%",CRIT_DMG:"0%",DODGE:"0%",HIT:"0%",RESIST:{de_dizziness:"0%",de_poisoned:"0%"}}),t(this,"EXTRA_EFFECT",{HP:0,MP:0,ATK:0,M_ATK:0,DEF:0,M_DEF:0,PEN:"0%",M_PEN:"0%",SPD:0,CRIT_RATE:"0%",CRIT_DMG:"0%",DODGE:"0%",HIT:"0%",RESIST:{de_dizziness:"0%",de_poisoned:"0%"}}),t(this,"ROUND_COUNT",0),this.NAME=e||"",this.AGE=s,this.SLIDE=a||"friendly",this.SEX=i,this.EXP=n,this.IMAGE=(null==r?void 0:r.image)??"",this.PROFEESION=(null==r?void 0:r.type)??be.NONE,this.initData()}initData(){this.LEVEL=this.getLevel(),this.HP=Math.floor(this.HP+50*this.LEVEL),this.CURRENT_HP=this.HP,this.MP=Math.floor(this.MP+10*this.LEVEL),this.CURRENT_MP=this.MP,this.ATK=Math.floor(this.ATK+3*this.LEVEL),this.M_ATK=Math.floor(this.M_ATK+2*this.LEVEL),this.DEF=Math.floor(this.DEF+3*this.LEVEL),this.M_DEF=Math.floor(this.M_DEF+2*this.LEVEL),this.SPD=Math.floor(this.SPD+2*this.LEVEL),this.CRIT_RATE=Math.floor(Math.max(this.ATK,this.M_ATK)/100)+parseFloat(this.CRIT_RATE)+"%",this.CRIT_DMG=Math.floor(Math.max(this.ATK,this.M_ATK)/100*2.5)+parseFloat(this.CRIT_DMG)+"%"}static fromObject(e){const t=new Ce(e.NAME,e.SLIDE,e.AGE,e.SEX,e.EXP,{name:"",type:e.PROFEESION||be.NONE,image:e.IMAGE||"",gender:e.SEX||"male"});return t.RESIST=e.RESIST||{},t}getStringUnit(e){return Ee(Math.round(parseFloat(this[e])+parseFloat(this.BUFF_EFFECT[e]||"0%")+parseFloat(this.EXTRA_EFFECT[e]||"0%")))+"%"}getNumberUnit(e){return Ee(Math.round(this[e]+(this.BUFF_EFFECT[e]||0)+(this.EXTRA_EFFECT[e]||0)))}getResist(e){var t,a;return Ee(Math.round(parseFloat(this.RESIST[e])+parseFloat((null==(t=this.BUFF_EFFECT.RESIST)?void 0:t[e])||"0%")+parseFloat((null==(a=this.EXTRA_EFFECT.RESIST)?void 0:a[e])||"0%")))+"%"}getRoundCount(){return this.ROUND_COUNT}canAct(){return!!this.CURRENT_HP}updateIncomeInfo(e){this.EXP+=e.EXP,this.getLevel()!==this.LEVEL&&this.initData(),this.reset()}reset(){this.CURRENT_HP=this.getNumberUnit("HP"),this.CURRENT_MP=this.getNumberUnit("MP"),this.EFFECT_MAP.clear(),this.BUFF_EFFECT={HP:0,MP:0,ATK:0,M_ATK:0,DEF:0,M_DEF:0,PEN:"0%",M_PEN:"0%",SPD:0,CRIT_RATE:"0%",CRIT_DMG:"0%",DODGE:"0%",HIT:"0%",RESIST:{de_dizziness:"0%",de_poisoned:"0%"}},this.ROUND_COUNT=0}updateStatus(){this.ROUND_COUNT++,this.EFFECT_MAP.size&&this.EFFECT_MAP.forEach((e=>{this.deleteBuffEffect(e.state)}))}useAdditionEffect(e,t){this.ADDITION_PERPORTY.has(e)&&this.deleteAdditionEffect(e),this.ADDITION_PERPORTY.set(e,t),this.deployStatus(t,this.EXTRA_EFFECT)}deleteAdditionEffect(e){let t=this.ADDITION_PERPORTY.get(e)||null;this.ADDITION_PERPORTY.has(e)&&this.ADDITION_PERPORTY.delete(e),t&&this.removeStatus(t,this.EXTRA_EFFECT)}clearAllAdditionEffect(){this.ADDITION_PERPORTY.forEach(((e,t)=>{this.deleteAdditionEffect(t)}))}getLevel(){return Math.floor(Math.pow(this.EXP/100,2/3))}isCritcal(){const e=this.getStringUnit("CRIT_RATE");return Math.random()<=parseFloat(e)/100}deleteBuffEffect(e,t=!1){if(this.EFFECT_MAP.has(e)){const a=this.EFFECT_MAP.get(e);let s=this.ROUND_COUNT-a.startCount>=a.roundCount;(t||s)&&(this.removeStatus(a.status,this.BUFF_EFFECT),this.EFFECT_MAP.delete(e))}}useBuffEffect(e){const t=this.EFFECT_MAP.get(e.state)||null,a=!t;return t&&!e.isOverlay?(this.deleteBuffEffect(t.state,!0),Ie.buffUpdate({target:this,effect:e.state})):t&&e.isOverlay&&(this.deployStatus(t.status,e.status),this.removeStatus(t.status,this.BUFF_EFFECT),Ie.buffStrenthen({target:this,effect:e.state})),this.EFFECT_MAP.set(e.state,e),this.deployStatus(e.status,this.BUFF_EFFECT),a}deployStatus(e,t){Object.entries(e).forEach((([e,a])=>{const s=e;if(e in t)if("number"==typeof a)t[s]=Math.floor(t[s]+a);else if("string"==typeof a){const e=parseFloat(t[s]);t[s]=Math.floor(e+parseFloat(a))+"%"}else{let e=t[s],i=a;e[Me.DIZZINESS]=Math.floor(parseFloat(e[Me.DIZZINESS])+parseFloat(i[Me.DIZZINESS]))+"%",e[Me.POISONED]=Math.floor(parseFloat(e[Me.POISONED])+parseFloat(i[Me.POISONED]))+"%"}}))}removeStatus(e,t){Object.entries(e).forEach((([e,a])=>{const s=e;if(e in t)if("number"==typeof a)t[s]=Math.floor(t[s]-a);else if("string"==typeof a){const e=parseFloat(t[s]);t[s]=Math.floor(e-parseFloat(a))+"%"}else{let e=t[s],i=a;e[Me.DIZZINESS]=Math.floor(parseFloat(e[Me.DIZZINESS])-parseFloat(i[Me.DIZZINESS]))+"%",e[Me.POISONED]=Math.floor(parseFloat(e[Me.POISONED])-parseFloat(i[Me.POISONED]))+"%"}}))}getPhysicalDemage(e,t=1){const a=this.getNumberUnit("ATK"),s=a+e*(1-parseFloat(this.PEN)/100);return s?Ee(Math.round(t*(a*(a/s))*(this.isCritcal()?parseFloat(this.CRIT_DMG)/100:1))):0}getMagicDemage(e,t=1){const a=this.getNumberUnit("M_ATK"),s=this.getStringUnit("M_PEN"),i=this.getStringUnit("CRIT_DMG");return a+e*(1-parseFloat(s)/100)?Ee(Math.round(t*(a*(a/(a+e*(1-parseFloat(s)/100))))*(this.isCritcal()?parseFloat(i)/100:1))):0}getFinalDenfence(e=Ae.NORMAL_ATTACK){let t=0;return t=e===Ae.MAGIC_ATTACK?this.getNumberUnit("M_DEF"):this.getNumberUnit("DEF"),Ee(t)}isHitEnemy(e){const t=parseFloat(this.getStringUnit("HIT"))-parseFloat(e);return Math.random()<t/100}isHitEffect(e,t="0%"){const a=parseFloat(this.getStringUnit("HIT"))+parseFloat(t),s=a-parseFloat(e);return Math.random()<s/a}}var Oe=(e=>(e.MALE="male",e.FEMALE="female",e))(Oe||{});const Fe=e=>Math.round(100*e^1.5),Le="People who don't want to be slaves";function Ne(e,t=Le){const a=G.deflate(e),s=z.lib.WordArray.create(a.buffer,a.byteOffset),i=z.SHA256(t),n=z.lib.WordArray.random(16),r={iv:n,mode:z.mode.CBC,padding:z.pad.Pkcs7},o=z.AES.encrypt(s,i,r);return n.concat(o.ciphertext).toString(z.enc.Base64)}function Re(e,t=Le){const a=z.SHA256(t),s=z.enc.Base64.parse(e),i=z.lib.WordArray.create(s.words.slice(0,4),16),n=z.lib.WordArray.create(s.words.slice(4),s.sigBytes-16),r={iv:i,mode:z.mode.CBC,padding:z.pad.Pkcs7},o=function(e){const t=e.words,a=e.sigBytes,s=new Uint8Array(a);for(let i=0;i<a;i++)s[i]=t[i>>>2]>>>24-i%4*8&255;return s}(z.AES.decrypt({ciphertext:n},a,r));return G.inflate(o,{to:"string"})}const we=class e{static isLoginIn(){return!Y().isBackToLogin&&e.isUserExist()}static initData(){e._isUserExist=!1;const t=e.getPlayerData();t&&(e._isUserExist=!0,e.awardInfo=t.assetsInfo||null,e.playerData=t||null)}static loadData(t){const a=JSON.parse(Re(t.encryptData));e._isUserExist=!0,e.awardInfo=a.assetsInfo||null,e.playerData=a||null;const s=Y();s.setCurrentPlayerId(a.userId),s.addSaveData(a.userId,t)}static gainAwardInfo(t){if(!e.awardInfo)return e.awardInfo=t,void e.syncAwardInfo();e.awardInfo.exp&&(e.awardInfo.exp+=t.exp||0),e.syncAwardInfo()}static syncAwardInfo(){e.playerData&&(e.playerData.assetsInfo=e.awardInfo,e.syncInfoToLocal())}static syncInfoToLocal(){const t=Y(),a=t.getCurrentPlayer(),s=e.getPlayerData();a&&s&&(a.encryptData=Ne(JSON.stringify(s)),a.lastOnlineTime=(new Date).getTime(),t.addSaveData(t.currentPlayerId,a))}static updatePersonData(t){e.playerData&&(e.playerData.userInfo=t)}static isUserExist(){e._isUserExist=!1;return e.getPlayerData()&&(e._isUserExist=!0),e._isUserExist}static getPlayerData(){if(e.playerData)return e.playerData;const t=Y().getCurrentPlayer();if(!t)return null;return JSON.parse(Re(t.encryptData))}static generatePlayerInfo(t,a){const s=new Ce(t,Pe.FRIENDLY,13,a.gender,0,a),i=(new Date).getTime(),n="undefined"!=typeof crypto&&"randomUUID"in crypto?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=15&crypto.getRandomValues(new Uint8Array(1))[0];return("x"===e?t:3&t|8).toString(16)})),r={userInfo:s,assetsInfo:null,createTime:i,lastOnlineTime:i,userId:n},o=Y();o.setCurrentPlayerId(n);const l={saveName:`存档${Object.keys(o.saveDataMap).length+1}`,nickName:t,lastOnlineTime:i,userImage:a.image,encryptData:Ne(JSON.stringify(r))};o.addSaveData(n,l),e.initData()}};t(we,"playerData",null),t(we,"_isUserExist",!1),t(we,"awardInfo",null);let ke=we;const xe=B({history:j(),routes:me});var $e;($e=xe).beforeEach(((e,t,a)=>{const s=ke.isLoginIn();return"/"===e.path&&s?a({path:"/cultivation"}):"/"===e.path||s?void a():a({path:"/"})})),$e.afterEach((()=>{window.scrollTo({top:0,behavior:"smooth"})}));const Ue=(e,t)=>{const a=e.__vccOpts||e;for(const[s,i]of t)a[s]=i;return a},He=Ue(a({__name:"ImageButton",props:{bgImage:{}},emits:["click"],setup(e,{emit:t}){const a=t,s=()=>{a("click")};return(e,t)=>(o(),n("div",{class:"basic_btn",onClick:s,style:E({background:`url(${e.bgImage}) 0% 0% / contain no-repeat`})},null,4))}}),[["__scopeId","data-v-acb2fb17"]]);class Be{constructor(){t(this,"container",null)}initContainer(){this.container||(this.container=document.createElement("div"),this.container.className="toast-container",document.body.appendChild(this.container))}hide(e,t){e.classList.remove("show"),e.classList.add("hide"),e.addEventListener("transitionend",(()=>{e.remove(),null==t||t(),e.parentElement&&0===e.parentElement.children.length&&e.parentElement.remove()}),{once:!0})}show(e,t){this.initContainer();const a=(null==t?void 0:t.duration)??2e3,s=null==t?void 0:t.onClose,i=document.createElement("div");i.className="toast",i.textContent=e,this.container.appendChild(i),requestAnimationFrame((()=>{i.classList.add("show")}));const n=window.setTimeout((()=>{this.hide(i,s)}),a);i.addEventListener("click",(()=>{clearTimeout(n),this.hide(i,s)}))}}const je={install(e){const t=new Be;e.config.globalProperties.$toast=t}};function Ge(){const e=h();if(!e)throw new Error("useToast must be called in setup()");return e.appContext.config.globalProperties.$toast}const ze={class:"modal"},Ke={class:"form-group"},Ve={class:"form-group"},Ze={class:"options"},We=["onClick"],Xe=["value"],Ye={class:"form-group"},qe={class:"profession-selector"},Je={key:0,class:"profession-card"},Qe=["src","alt"],et=a({__name:"RegisterView",emits:["close"],setup(e,{emit:t}){const a=t,d=Ge(),m=s(""),E=s(Oe.MALE),h=()=>{m.value?(ke.generatePlayerInfo(m.value,b.value),T()):d.show("请输入昵称")},T=()=>{a("close")},I=s([{gender:Oe.MALE,lable:"男"},{gender:Oe.FEMALE,lable:"女"}]),S=s([{name:"剑客",type:be.SWORDSMAN,gender:Oe.FEMALE,image:"/static/png/sword_female-Wa4SuR91.png"},{name:"剑客",type:be.SWORDSMAN,gender:Oe.MALE,image:"/static/png/sword_male-N2WqOmzi.png"},{name:"符师",type:be.TALISMAN,gender:Oe.FEMALE,image:"/static/png/talisman_female-tqQP2lfG.png"},{name:"符师",type:be.TALISMAN,gender:Oe.MALE,image:"/static/png/talisman_male-CEP4r9VQ.png"},{name:"毒师",type:be.POISONMASTER,gender:Oe.FEMALE,image:"/static/png/poison_female-Dsel_5zg.png"},{name:"毒师",type:be.POISONMASTER,gender:Oe.MALE,image:"/static/png/posion_male-BZazdvtx.png"},{name:"医仙",type:be.MEDICALFAIRY,gender:Oe.FEMALE,image:"/static/png/medical_fairy-DHMwIXIb.png"},{name:"狂人",type:be.BERSERKER,gender:Oe.MALE,image:"/static/png/berserker-D_-BlpDq.png"}]),A=s([]),M=e=>{A.value=S.value.filter((t=>t.gender===e))},D=s(0),b=i((()=>A.value[D.value])),P=()=>{D.value=(D.value-1+A.value.length)%A.value.length},C=()=>{D.value=(D.value+1)%A.value.length};return g((()=>{M(Oe.MALE)})),(e,t)=>(o(),n("div",ze,[u("div",null,[u("div",Ke,[t[2]||(t[2]=u("label",{for:"username"},"昵称",-1)),f(u("input",{id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>m.value=e),type:"text",placeholder:"请输入用户名",required:""},null,512),[[v,m.value]])]),u("div",Ve,[t[3]||(t[3]=u("label",null,"性别",-1)),u("div",Ze,[(o(!0),n(l,null,c(I.value,(e=>(o(),n("label",{key:e.gender,onClick:t=>M(e.gender)},[f(u("input",{type:"radio","onUpdate:modelValue":t[1]||(t[1]=e=>E.value=e),value:e.gender},null,8,Xe),[[y,E.value]]),_(" "+p(e.lable),1)],8,We)))),128))])]),u("div",Ye,[t[4]||(t[4]=u("label",null,"职业",-1)),u("div",qe,[u("div",{onClick:P,class:"nav-btn"},"《"),b.value?(o(),n("div",Je,[u("img",{src:b.value.image,alt:b.value.name},null,8,Qe),u("p",null,p(b.value.name),1)])):r("",!0),u("div",{onClick:C,class:"nav-btn"},"》")])]),u("div",{class:"form-actions"},[u("span",{type:"submit",class:"btn primary",onClick:h},"确定"),u("span",{type:"button",class:"btn secondary",onClick:T},"取消")])])]))}}),tt={class:"modal-wrapper"},at={class:"modal-container"},st={key:0,class:"modal-header"},it={class:"modal-body"},nt={key:1,class:"modal-footer"},rt=Ue(a({__name:"BaseModal",props:{visible:{type:Boolean},title:{},hideFooter:{type:Boolean},maskClosable:{type:Boolean}},emits:["update:visible"],setup(e,{emit:t}){const a=e,s=t;function i(){s("update:visible",!1)}function l(){!1!==a.maskClosable&&i()}return(e,t)=>(o(),T(M,{to:"body"},[I(S,{name:"modal-fade"},{default:A((()=>[e.visible?(o(),n("div",{key:0,class:"modal-mask",onClick:b(l,["self"])},[u("div",tt,[u("div",at,[e.title?(o(),n("div",st,[u("h3",null,p(e.title),1),u("span",{class:"modal-close",onClick:i},"×")])):r("",!0),u("div",it,[D(e.$slots,"default",{},void 0,!0)]),e.hideFooter?r("",!0):(o(),n("div",nt,[D(e.$slots,"footer",{},(()=>[u("div",{style:{color:"var(--text-secondary)"},onClick:i},"关闭")]),!0)]))])])])):r("",!0)])),_:3})]))}}),[["__scopeId","data-v-77ed4424"]]),ot={class:"save-page"},lt={class:"save-list"},ct=["onClick"],dt=["src"],ut={class:"info"},pt={class:"row editable"},mt={class:"value"},Et={class:"row"},ht={class:"value"},gt={class:"row"},ft={class:"value"},vt=Ue(a({__name:"SaveDataPage",props:{show:{type:Boolean},title:{}},emits:["update:selectedId","update:show"],setup(e,{emit:t}){const a=Y(),i=Ge(),r=e,m=s(r.show),E=s([]),h=s("");let g;P((()=>r.show),(e=>{m.value=e,e&&(E.value=[],h.value="",g=null,Object.entries(a.saveDataMap).forEach((e=>{var t;null==(t=E.value)||t.push(e[1])})),g=a.saveDataMap[a.currentPlayerId]||null,h.value=(null==g?void 0:g.encryptData)||"")})),P((()=>m.value),(e=>{e||_()}));const f=()=>{var e;h.value&&(g?g.encryptData!==(null==(e=a.getCurrentPlayer())?void 0:e.encryptData)?(ke.loadData(g),v("update:selectedId",a.currentPlayerId),_()):_():i.show("请选择存档!"))},v=t,_=()=>{v("update:show",!1)};function y(e){const t=new Date(e),a=e=>e.toString().padStart(2,"0");return`${t.getFullYear()}/${a(t.getMonth()+1)}/${a(t.getDate())}\n      ${a(t.getHours())}:${a(t.getMinutes())}:${a(t.getSeconds())}`}return(e,t)=>(o(),T(rt,{visible:m.value,"onUpdate:visible":t[0]||(t[0]=e=>m.value=e),title:e.title},{default:A((()=>[u("div",ot,[u("ul",lt,[(o(!0),n(l,null,c(E.value,((e,a)=>(o(),n("li",{key:e.encryptData,class:d(["save-item",{selected:e.encryptData===h.value}]),onClick:e=>function(e){g=E.value[e],h.value=g.encryptData}(a)},[u("img",{class:"cover",src:e.userImage,alt:"封面"},null,8,dt),u("div",ut,[u("div",pt,[t[1]||(t[1]=u("span",{class:"label"},"存档名：",-1)),u("span",mt,p(e.saveName),1)]),u("div",Et,[t[2]||(t[2]=u("span",{class:"label"},"昵称：",-1)),u("span",ht,p(e.nickName),1)]),u("div",gt,[t[3]||(t[3]=u("span",{class:"label"},"上次登录：",-1)),u("span",ft,p(y(e.lastOnlineTime)),1)])])],10,ct)))),128))])])])),footer:A((()=>[u("span",{style:{"margin-right":"1rem",cursor:"pointer"},onClick:_},"关闭"),u("span",{onClick:f,style:{cursor:"pointer"}},"加载存档")])),_:1},8,["visible","title"]))}}),[["__scopeId","data-v-0eb57a95"]]),_t={key:0,class:"main_box"},yt={class:"main_content"},Tt={class:"current_user"},It={class:"username"},St={class:"btn_area"},At=k(a({__name:"App",setup(e){const t=Y(),a=e=>{t.updateMediaHelperType(e)};let i=s(De.LOGIN),r=s(null);g((()=>{X.init(a);const e=X.getMediaHelperType();t.updateMediaHelperType(e),m(e),c()}));const c=()=>{ke.initData(),i.value=ke.isLoginIn()?De.HOME:De.LOGIN,r.value=t.getCurrentPlayer()};P((()=>t.mediaHelperType),(e=>{m(e)})),P((()=>t.isBackToLogin),(e=>{c()}));const m=e=>{let t=16;t=4===e.gridColumns?16:8===e.gridColumns?18:20,J.setWindowFontSize(t);const a=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--tab-bar-height"));J.setWindowAvoidArea(20,20,20,25+a*t)};C((()=>{X.destroy()}));const E=()=>{ke.isUserExist()?(i.value=De.HOME,t.setBackToLogin(!1),xe.replace("/cultivation")):v()},h=s(!1),v=()=>{i.value=De.REGISTER,h.value=!0},_=()=>{r.value=t.getCurrentPlayer(),i.value=De.LOGIN,h.value=!1},y=s(!1),S=()=>{y.value=!0},M=e=>{c()};return(e,a)=>{var s;const c=F("router-view");return o(),n(l,null,[O(i)===O(De).HOME?(o(),n("div",_t,[a[2]||(a[2]=u("div",{class:"main_nav"},null,-1)),u("div",yt,[I(te),I(c,null,{default:A((({Component:e})=>[(o(),T(R,{max:4},[(o(),T(w(e)))],1024))])),_:1})]),a[3]||(a[3]=u("div",{class:"main_footer"},null,-1))])):(o(),n("div",{key:1,class:d(["main_box login_view",{grid4:4===O(t).mediaHelperType.gridColumns||O(t).mediaHelperType.gridColumns>4&&"portrait"===O(t).mediaHelperType.orientationType,grid8:O(t).mediaHelperType.gridColumns>4&&"portrait"!==O(t).mediaHelperType.orientationType}])},[a[5]||(a[5]=L('<div class="image_area"><div class="title"><img src="/static/png/banner-TwJEqS2M.png" width="100%" height="fit-content" alt="" srcset=""></div><div class="main_person"><img src="/static/png/main_person-Ck586Rxr.png" width="100%" height="fit-content" alt="" srcset=""></div></div>',1)),f(u("div",Tt,[u("span",It,p(null==(s=O(r))?void 0:s.nickName),1),(o(),n("svg",{onClick:S,t:"1748780636568",class:"icon re_select",viewBox:"0 0 1204 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9501",width:"200",height:"200"},a[4]||(a[4]=[u("path",{d:"M792.937412 787.094588a366.411294 366.411294 0 0 1-215.762824 66.43953c-10.24-0.180706-20.178824-0.903529-30.177882-1.626353-4.035765-0.421647-8.131765-1.084235-12.16753-1.686589a302.260706 302.260706 0 0 1-23.311058-3.553882c-4.698353-0.783059-9.396706-2.108235-13.974589-3.19247a334.426353 334.426353 0 0 1-22.287058-5.421177c-3.493647-1.385412-6.746353-2.409412-10.24-3.855059a279.732706 279.732706 0 0 1-25.057883-9.035294l-5.421176-2.16847a646.384941 646.384941 0 0 1-28.129883-13.673412c-0.301176-0.240941-0.783059-0.421647-1.14447-0.602353a367.435294 367.435294 0 0 1-83.84753-62.945883l-1.264941-1.325176a307.380706 307.380706 0 0 1-26.262588-29.756235 366.411294 366.411294 0 0 1-80.715294-229.376H310.211765L155.105882 252.687059 0 485.315765h96.858353c0 101.857882 31.924706 196.367059 85.835294 274.672941 0.662588 1.204706 1.084235 2.409412 1.807059 3.373176 5.541647 8.131765 11.866353 15.480471 17.769412 22.889412 2.349176 2.770824 4.336941 5.541647 6.746353 8.613647a542.900706 542.900706 0 0 0 30.479058 33.310118 481.882353 481.882353 0 0 0 109.025883 81.799529l3.19247 1.746824c11.444706 6.204235 23.311059 11.926588 35.177412 17.106823l8.854588 3.915294c10.360471 4.336941 20.841412 8.011294 31.442824 11.625412 4.939294 1.746824 9.999059 3.433412 15.058823 5.059765 9.276235 2.650353 18.672941 5.059765 28.190118 7.168 6.384941 1.505882 12.528941 3.132235 19.034353 4.276706 2.650353 0.662588 5.12 1.505882 7.770353 1.807059 9.035294 1.626353 18.070588 2.409412 27.045647 3.493647 3.252706 0.602353 6.505412 1.204706 9.697882 1.505882a480.978824 480.978824 0 0 0 325.51153-85.353412 58.187294 58.187294 0 0 0 14.45647-80.956235 57.825882 57.825882 0 0 0-81.01647-14.275765m273.167059-301.778823a480.918588 480.918588 0 0 0-85.172706-273.950118c-0.843294-1.325176-1.325176-2.710588-1.987765-3.915294a593.438118 593.438118 0 0 0-21.383529-27.467294 34.334118 34.334118 0 0 1-2.409412-3.312941A484.592941 484.592941 0 0 0 774.144 40.779294c-2.048-0.843294-3.794824-1.746824-5.842824-2.529882a582.475294 582.475294 0 0 0-34.334117-12.589177C730.051765 24.335059 725.835294 22.889412 721.739294 21.684706a486.279529 486.279529 0 0 0-30.418823-7.951059c-5.662118-1.204706-11.444706-2.710588-17.167059-3.855059-2.831059-0.481882-5.421176-1.325176-8.372706-1.927529-7.649882-1.204706-15.179294-1.987765-22.889412-2.891294-5.360941-0.602353-10.480941-1.385412-15.841882-1.987765a501.76 501.76 0 0 0-38.550588-1.987765c-2.288941 0-4.577882-0.301176-6.927059-0.301176-0.421647 0-0.783059 0.060235-1.204706 0.180706A480.316235 480.316235 0 0 0 303.585882 88.365176a58.127059 58.127059 0 1 0 66.861177 95.171765 365.206588 365.206588 0 0 1 246.241882-64.63247c3.312941 0.240941 6.445176 0.722824 9.758118 1.204705 8.734118 1.084235 17.468235 2.228706 26.021647 4.096 3.734588 0.602353 7.529412 1.626353 11.083294 2.409412 8.493176 1.927529 16.745412 3.915294 24.937412 6.384941 2.710588 0.783059 5.180235 1.686588 7.710117 2.650353 9.456941 3.072 18.733176 6.264471 27.708236 10.11953 0.963765 0.240941 1.807059 0.963765 2.770823 1.264941a369.724235 369.724235 0 0 1 139.565177 104.929882 367.073882 367.073882 0 0 1 83.727059 233.35153H852.931765l155.346823 232.688941 154.925177-232.688941H1066.164706z",fill:"var(--color-accent)","p-id":"9502"},null,-1)])))],512),[[N,O(r)]]),u("div",St,[I(He,{class:"login_btn","bg-image":O("/static/png/login_btn-Be3kmysg.png"),onClick:E},null,8,["bg-image"]),I(He,{class:"register_btn","bg-image":O("/static/png/register_btn-zs2mkJ9T.png"),onClick:v},null,8,["bg-image"])])],2)),I(rt,{visible:h.value,"onUpdate:visible":a[0]||(a[0]=e=>h.value=e),title:"创建角色","mask-closable":!0,"hide-footer":!0},{default:A((()=>[I(et,{onClose:_})])),_:1},8,["visible"]),I(vt,{"onUpdate:selectedId":M,title:"读取存档","mask-closable":!0,show:y.value,"onUpdate:show":a[1]||(a[1]=e=>y.value=e)},null,8,["show"])],64)}}})),Mt=$();Mt.use(K),At.use(Mt),At.use(je),At.use(xe),At.mount("#app");export{Ie as L,Ce as P,Pe as S,Me as U,Ue as _,Oe as a,Ge as b,ke as c,Ee as d,he as f,Fe as g,fe as m,ge as p,xe as r,Y as u};
